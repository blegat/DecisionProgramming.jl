<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Decision Model · DecisionProgramming.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DecisionProgramming.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Decision Model</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Influence-Diagram"><span>Influence Diagram</span></a></li><li><a class="tocitem" href="#Paths"><span>Paths</span></a></li><li><a class="tocitem" href="#Sets"><span>Sets</span></a></li><li><a class="tocitem" href="#Probabilities"><span>Probabilities</span></a></li><li><a class="tocitem" href="#Decisions"><span>Decisions</span></a></li><li><a class="tocitem" href="#Consequences"><span>Consequences</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li><li><a class="tocitem" href="#Model-Formulation"><span>Model Formulation</span></a></li><li><a class="tocitem" href="#Lazy-Cuts"><span>Lazy Cuts</span></a></li><li><a class="tocitem" href="#Complexity"><span>Complexity</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../analysis/">Analysis</a></li><li><a class="tocitem" href="../extensions/">Extensions</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/pig-breeding/">Pig Breeding Problem</a></li><li><a class="tocitem" href="../examples/n-monitoring/">N-Monitoring Problem</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Decision Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Decision Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gamma-opt/DecisionProgramming.jl/blob/master/docs/src/model.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Decision-Model"><a class="docs-heading-anchor" href="#Decision-Model">Decision Model</a><a id="Decision-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Decision-Model" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>The model is based on <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>, sections 3 and 5. We highly recommend to read them for motivation, details, and proofs of the formulation explained here. The paper <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup> explains details about influence diagrams.</p><h2 id="Influence-Diagram"><a class="docs-heading-anchor" href="#Influence-Diagram">Influence Diagram</a><a id="Influence-Diagram-1"></a><a class="docs-heading-anchor-permalink" href="#Influence-Diagram" title="Permalink"></a></h2><p><img src="../figures/influence-diagram.svg" alt/></p><p>We define the <strong>influence diagram</strong> as a directed, acyclic graph such that part of its nodes have a finite number of states associated with them</p><div>\[G=(N,A,S_j).\]</div><p>The set of nodes <span>$N=C∪D∪V$</span> consists of <strong>chance nodes</strong> <span>$C,$</span> <strong>decision nodes</strong> <span>$D,$</span> and <strong>value nodes</strong> <span>$V$</span>. We index the nodes such that <span>$C∪D=\{1,...,n\}$</span> and <span>$V=\{n+1,...,n+|V|\}$</span> where <span>$n=|C|+|D|.$</span> The set of <strong>arcs</strong> consists of pairs of nodes such that</p><div>\[A⊆\{(i,j)∣1≤i&lt;j≤|N|,i∉V\}.\]</div><p>The condition enforces that the graph is directed and acyclic, and there are no arcs from value nodes to other nodes.</p><p>Each chance and decision node <span>$j∈C∪D$</span> is associates with a finite number of <strong>states</strong> <span>$S_j.$</span> We use integers from one to number of states <span>$|S_j|$</span> to encode individual states</p><div>\[S_j=\{1,...,|S_j|\}.\]</div><p>We define the <strong>information set</strong> of node <span>$j∈N$</span> to be its predecessor nodes</p><div>\[I(j)=\{i∣(i,j)∈A\}.\]</div><p>Practically, the information set is an edge list to reverse direction in the graph.</p><h2 id="Paths"><a class="docs-heading-anchor" href="#Paths">Paths</a><a id="Paths-1"></a><a class="docs-heading-anchor-permalink" href="#Paths" title="Permalink"></a></h2><p>Paths in influence diagrams represent realizations of states for chance and decision nodes. Formally, a <strong>path</strong> is a sequence of states</p><div>\[s=(s_1, s_2, ...,s_n),\]</div><p>where each state <span>$s_i∈S_i$</span> for all chance and decision nodes <span>$i∈C∪D.$</span></p><p>We define a <strong>subpath</strong> of <span>$s$</span> is a subsequence</p><div>\[(s_{i_1}, s_{i_2}, ..., s_{i_{k}}),\]</div><p>where <span>$1≤i_1&lt;i_2&lt;...&lt;i_k≤n$</span> and <span>$k≤n.$</span></p><p>The <strong>information path</strong> of node <span>$j∈N$</span> on path <span>$s$</span> is a subpath defined as</p><div>\[s_{I(j)}=(s_i ∣ i∈I(j)).\]</div><p><strong>Concatenation of two paths</strong> <span>$s$</span> and <span>$s^′$</span> is denoted <span>$s;s^′.$</span></p><h2 id="Sets"><a class="docs-heading-anchor" href="#Sets">Sets</a><a id="Sets-1"></a><a class="docs-heading-anchor-permalink" href="#Sets" title="Permalink"></a></h2><p>We define the set of <strong>all paths</strong> as a product set of all states</p><div>\[S=∏_{j∈C∪D} S_j.\]</div><p>The set of <strong>information paths</strong> of node <span>$j∈N$</span> is the product set of the states in its information set</p><div>\[S_{I(j)}=∏_{i∈I(j)} S_i.\]</div><p>We denote elements of the sets using notation <span>$s_j∈S_j$</span>, <span>$s∈S$</span>, and <span>$s_{I(j)}∈S_{I(j)}.$</span></p><h2 id="Probabilities"><a class="docs-heading-anchor" href="#Probabilities">Probabilities</a><a id="Probabilities-1"></a><a class="docs-heading-anchor-permalink" href="#Probabilities" title="Permalink"></a></h2><p>For each chance node <span>$j∈C$</span>, we denote the <strong>probability</strong> of state <span>$s_j$</span> given information path <span>$s_{I(j)}$</span> as</p><div>\[ℙ(X_j=s_j∣X_{I(j)}=s_{I(j)})∈[0, 1].\]</div><p>We define the <strong>upper bound of the path probability</strong> <span>$s$</span> as</p><div>\[p(s) = ∏_{j∈C} ℙ(X_j=s_j∣X_{I(j)}=s_{I(j)}).\]</div><p>We use it as a constraint in the model formulation.</p><h2 id="Decisions"><a class="docs-heading-anchor" href="#Decisions">Decisions</a><a id="Decisions-1"></a><a class="docs-heading-anchor-permalink" href="#Decisions" title="Permalink"></a></h2><p>For each decision node <span>$j∈D,$</span> a <strong>local decision strategy</strong> maps an information path <span>$s_{I(j)}$</span> to a state <span>$s_j$</span></p><div>\[Z_j:S_{I(j)}↦S_j.\]</div><p><strong>Decision strategy</strong> <span>$Z$</span> contains one local decision strategy for each decision node. Set of <strong>all decision strategies</strong> is denoted <span>$ℤ.$</span></p><h2 id="Consequences"><a class="docs-heading-anchor" href="#Consequences">Consequences</a><a id="Consequences-1"></a><a class="docs-heading-anchor-permalink" href="#Consequences" title="Permalink"></a></h2><p>For each value node <span>$j∈V$</span>, we define the <strong>consequence</strong> given information path <span>$s_{I(j)}$</span> as</p><div>\[Y_j:S_{I(j)}↦ℂ,\]</div><p>where <span>$ℂ$</span> is the set of consequences. In the code, the consequences are implicit, and we map information paths directly to the utility values.</p><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><p>The <strong>utility function</strong> maps consequences to real-valued utilities</p><div>\[U:ℂ↦ℝ.\]</div><p>The <strong>utility of a path</strong> is defined as the sum of utilities for consequences of value nodes <span>$j∈V$</span> with information paths <span>$I(j)$</span></p><div>\[\mathcal{U}(s) = ∑_{j∈V} U(Y_j(s_{I(j)})).\]</div><h2 id="Model-Formulation"><a class="docs-heading-anchor" href="#Model-Formulation">Model Formulation</a><a id="Model-Formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Formulation" title="Permalink"></a></h2><p>The mixed-integer linear program maximizes the expected utility (1) over all decision strategies as follows.</p><div>\[\underset{Z∈ℤ}{\text{maximize}}\quad
∑_{s∈S} π(s) \mathcal{U}(s) \tag{1}\]</div><p>Subject to</p><div>\[z(s_j∣s_{I(j)}) ∈ \{0,1\},\quad ∀j∈D, s_j∈S_j, s_{I(j)}∈S_{I(j)} \tag{2}\]</div><div>\[∑_{s_j∈S_j} z(s_j∣s_{I(j)})=1,\quad ∀j∈D, s_{I(j)}∈S_{I(j)} \tag{3}\]</div><div>\[0≤π(s)≤p(s),\quad ∀s∈S \tag{4}\]</div><div>\[π(s) ≤ z(s_j∣s_{I(j)}),\quad ∀j∈D, s∈S \tag{5}\]</div><div>\[π(s) ≥ p(s) + ∑_{j∈D} z(s_j∣s_{I(j)}) - |D|,\quad ∀s∈S \tag{6}\]</div><p><strong>Decision variables</strong> <span>$z$</span> are binary variables (2) that model different decision strategies. The condition (3) limits decisions <span>$s_j$</span> to one per information path <span>$s_{I(j)}.$</span> Decision strategy <span>$Z_j(s_I(j))=s_j$</span> is equivalent to <span>$z(s_j∣s_{I(j)})=1.$</span></p><p>We denote the probability distribution of paths using <span>$π.$</span> The <strong>path probability</strong> <span>$π(s)$</span> is between zero and the upper bound of the path probability (4). The path probability is zero on paths where at least one decision variable is zero (5) and equal to the upper bound on paths if all decision variables on the path are one (6).</p><p>We can omit the constraint (6) from the model if we use a positive utility function <span>$U^+$</span> which is an affine transformation of utility function <span>$U.$</span> As an example, we can normalize and add one to the original utility function.</p><div>\[U^+(c) = \frac{U(c) - \min_{c∈ℂ}U(c)}{\max_{c∈ℂ}U(c) - \min_{c∈ℂ}U(c)} + 1.\]</div><p>There are also alternative objectives and ways to model risk. We discuss extensions to the model on the <a href="../extensions/#Extensions">Extensions</a> page.</p><h2 id="Lazy-Cuts"><a class="docs-heading-anchor" href="#Lazy-Cuts">Lazy Cuts</a><a id="Lazy-Cuts-1"></a><a class="docs-heading-anchor-permalink" href="#Lazy-Cuts" title="Permalink"></a></h2><p>Probability sum cut</p><div>\[∑_{s∈S}π(s)=1\]</div><p>Number of active paths cut</p><div>\[∑_{s∈S}π(s)/p(s)=n_{s}\]</div><h2 id="Complexity"><a class="docs-heading-anchor" href="#Complexity">Complexity</a><a id="Complexity-1"></a><a class="docs-heading-anchor-permalink" href="#Complexity" title="Permalink"></a></h2><p>Number of paths</p><div>\[|S|=∏_{i∈C∪D} |S_i| = ∏_{i∈C} |S_i| ⋅ ∏_{i∈D} |S_i|\]</div><p>Probability stages</p><div>\[⋃_{i∈C} (S_{I(i)}×S_i)\]</div><p>Number of probability stages</p><div>\[∑_{i∈C}|S_{I(i)}| |S_i|\]</div><p>Decision stages</p><div>\[⋃_{i∈D} (S_{I(i)}×S_i)\]</div><p>Number of decision stages</p><div>\[∑_{i∈D}|S_{I(i)}| |S_i|\]</div><p>Utility stages</p><div>\[⋃_{i∈V} S_{I(i)}\]</div><p>Number of utility stages</p><div>\[∑_{v∈V}|S_{I(v)}|\]</div><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Salo, A., Andelmin, J., &amp; Oliveira, F. (2019). Decision Programming for Multi-Stage Optimization under Uncertainty, 1–35. Retrieved from <a href="http://arxiv.org/abs/1910.09196">http://arxiv.org/abs/1910.09196</a></li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Bielza, C., Gómez, M., &amp; Shenoy, P. P. (2011). A review of representation issues and modeling challenges with influence diagrams. Omega, 39(3), 227–241. https://doi.org/10.1016/j.omega.2010.07.003</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../analysis/">Analysis »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 7 July 2020 08:47">Tuesday 7 July 2020</span>. Using Julia version 1.1.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
